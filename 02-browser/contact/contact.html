<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h2>연락처 관리 프로그램</h2>
    <hr />
    <form>
      <label>이름 <input type="text" /></label>
      <label>전화번호<input type="tel" /></label>
      <label>이메일<input type="email" /></label>
      <button>추가</button>
    </form>
    <h3>저장된 연락처 리스트</h3>
    <table>
      <tbody></tbody>
    </table>
    <hr />
    연락처삭제: <br />
    <form>
      <label>이름을 입력하세요: <input type="text" /></label>
      <button>삭제</button>
    </form>

    <script>
      (() => {
        // 추가폼
        const form = document.forms[0];
        const inputs = form.querySelectorAll("input");
        const name = inputs[0];
        const phone = inputs[1];
        const email = inputs[2];

        const add = form.querySelector("button");

        add.addEventListener("click", (e) => {
          e.preventDefault();

          if (name.value === "") {
            alert("이름을 입력해주세요.");
            return;
          }

          if (phone.value === "") {
            alert("전화번호를 입력해주세요.");
            return;
          }

          const tbody = document.querySelector("tbody");
          const tr = document.createElement("tr");

          // 삭제할 때 사용하려고 데이터 속성을 추가함
          tr.dataset.name = name.value;
          tr.innerHTML = `<td>${name.value}</td><td>${phone.value}</td><td>${email.value}</td>`;
          tbody.prepend(tr);
          form.reset();
        });
      })();

      // 삭제폼
      (() => {
        const form = document.forms[1];
        const name = form.querySelector("input");
        const del = form.querySelector("button");

        del.addEventListener("click", () => {
          e.preventDefault(); //폼에 제출되는 걸 막는 기능
          const tr = document.querySelector(`tr[data-name="${name.value}"]`);

          if (!tr) {
            alert("해당 이름의 연락처 없습니다.");
            return;
          }

          tr.remove();

          form.reset();
        });
      })();
    </script>
  </body>
</html>
